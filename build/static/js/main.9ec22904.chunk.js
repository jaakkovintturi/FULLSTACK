(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{20:function(e,n,t){},21:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(0),o=t(2),r=t.n(o),i=t(14),a=t.n(i),s=(t(20),t(4)),u=(t(21),t(3)),l=t.n(u),d="/api/persons",j=function(){return console.log("jee"),l.a.get(d)},b=function(e){return l.a.post(d,e)},f=function(e,n){return l.a.put("".concat(d,"/").concat(e),n)},m=function(e){return l.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},h=function(e){return Object(c.jsxs)("div",{children:[Object(c.jsx)("p",{children:"name:"})," ",Object(c.jsx)("input",{value:e.newName,onChange:e.handleNameChange}),Object(c.jsx)("p",{children:"number:"})," ",Object(c.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange}),Object(c.jsx)("button",{onClick:e.addInformation,type:"submit",children:"add"})]})},O=function(e){var n=e.message;return null===n?null:Object(c.jsx)("div",{className:"notification",children:n})},p=function(e){var n=e.person,t=e.msg,o=e.persons;return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:n.name}),Object(c.jsx)("td",{children:n.number}),Object(c.jsx)("td",{children:Object(c.jsx)("button",{onClick:function(){window.confirm("Delete ".concat(n.name," ?"))&&(o.includes(n)&&(m(n.id),console.log("Person deleted.")),t("".concat(n.name," deleted.")),setTimeout((function(){t(null)}),2500))},type:"submit",children:"delete"})})]})},g=function(e){var n=e.setPersons,t=e.persons,r=e.setNewMessage;return Object(o.useEffect)((function(){j().then((function(e){console.log("promise fulfilled"),n(e.data)}))}),[]),console.log("render",t.length,"notes"),Object(c.jsx)("table",{children:Object(c.jsx)("tbody",{children:t.map((function(e){return Object(c.jsx)(p,{person:e,msg:r,persons:t},e.name)}))})})},x=function(){var e=Object(o.useState)([]),n=Object(s.a)(e,2),t=n[0],r=n[1],i=Object(o.useState)(""),a=Object(s.a)(i,2),u=a[0],l=a[1],d=Object(o.useState)(""),j=Object(s.a)(d,2),p=j[0],x=j[1],v=Object(o.useState)(null),w=Object(s.a)(v,2),C=w[0],N=w[1];return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(O,{message:C}),Object(c.jsx)("form",{children:Object(c.jsx)(h,{handleNumberChange:function(e){x(e.target.value)},newNumber:p,handleNameChange:function(e){l(e.target.value)},newName:u,addInformation:function(e){e.preventDefault();var n={name:u,number:p},c=t.map((function(e){return e.name})),o=t.find((function(e){return e.name===n.name}));c.includes(u)||""===p?window.confirm("".concat(u," is already added to phonebook, replace the old number with a new one?"))&&f(o.id,n).then((function(e){return e.data})).then((function(e){r(t.map((function(t){return t.name!==n.name?t:e})))})).catch((function(e){N("Information of '".concat(n.name,"' has already been removed from server")),setTimeout((function(){N(null)}),4e3),r(t.filter((function(e){return e.id!==o.id})))})):(r(t.concat(n)),l(""),x(""),N("Lis\xe4ttiin ".concat(u)),console.log(n.id),setTimeout((function(){N(null)}),2500),b(n).then((function(e){console.log(e)})))}})}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(g,{persons:t,setPersons:r,setNewMessage:N}),Object(c.jsx)("button",{onClick:function(){if(window.confirm("Delete all the names?")){for(var e=0;e<t.length;e++){var n=t[e];m(n.id)}console.log("Persons deleted.")}},type:"submit",children:"delete all"})]})},v=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,40)).then((function(n){var t=n.getCLS,c=n.getFID,o=n.getFCP,r=n.getLCP,i=n.getTTFB;t(e),c(e),o(e),r(e),i(e)}))};a.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(x,{})}),document.getElementById("root")),v()}},[[39,1,2]]]);
//# sourceMappingURL=main.9ec22904.chunk.js.map